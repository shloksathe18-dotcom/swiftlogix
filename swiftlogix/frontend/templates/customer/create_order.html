{% extends 'base.html' %}
{% block content %}
<h3>Create Order</h3>
<form id="orderForm" class="row g-3">
  <div class="col-md-6">
    <label class="form-label">Pickup Address</label>
    <input class="form-control" name="pickup_address" />
  </div>
  <div class="col-md-3">
    <label class="form-label">Pickup Lat</label>
    <input class="form-control" name="pickup_lat" />
  </div>
  <div class="col-md-3">
    <label class="form-label">Pickup Lng</label>
    <input class="form-control" name="pickup_lng" />
  </div>
  <div class="col-md-6">
    <label class="form-label">Drop Address</label>
    <input class="form-control" name="drop_address" />
  </div>
  <div class="col-md-3">
    <label class="form-label">Drop Lat</label>
    <input class="form-control" name="drop_lat" />
  </div>
  <div class="col-md-3">
    <label class="form-label">Drop Lng</label>
    <input class="form-control" name="drop_lng" />
  </div>
  <div class="col-md-6">
    <label class="form-label">Material Type</label>
    <input class="form-control" name="material_type" />
  </div>
  <div class="col-md-6">
    <label class="form-label">Weight (kg)</label>
    <input class="form-control" name="weight_kg" />
  </div>
  <div class="col-12">
    <button class="btn btn-success" type="submit">Create</button>
  </div>
</form>
<pre id="out" class="mt-3"></pre>
<script>
const form = document.getElementById('orderForm');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form).entries());
  data.weight_kg = parseFloat(data.weight_kg || 0);
  const res = await SwiftLogix.authFetch('/api/customer/orders', { method: 'POST', body: JSON.stringify(data) });
  document.getElementById('out').textContent = JSON.stringify(res, null, 2);
});
</script>
{% endblock %}
